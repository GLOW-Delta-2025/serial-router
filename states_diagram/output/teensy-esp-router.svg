<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 14.0.1 (20251006.0113)
 -->
<!-- Title: teensy_esp_router Pages: 1 -->
<svg width="8419pt" height="758pt"
 viewBox="0.00 0.00 8419.00 758.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 754.23)">
<title>teensy_esp_router</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-754.23 8414.75,-754.23 8414.75,4 -4,4"/>
<!-- S_IDLE_ROUTER -->
<g id="node1" class="node">
<title>S_IDLE_ROUTER</title>
<g id="a_node1"><a xlink:title="{&quot;owner&quot;: &quot;ROUTER&quot;, &quot;role&quot;: &quot;neutral&quot;, &quot;description&quot;: &quot;Router ready to route frames and track outstanding exchanges&quot;}">
<polygon fill="#f28c28" stroke="black" points="127.75,-345.23 0,-345.23 0,-307.23 127.75,-307.23 127.75,-345.23"/>
<text xml:space="preserve" text-anchor="middle" x="63.88" y="-327.93" font-family="Helvetica,sans-Serif" font-size="14.00">S_IDLE_ROUTER</text>
<text xml:space="preserve" text-anchor="middle" x="63.88" y="-312.93" font-family="Helvetica,sans-Serif" font-size="14.00">ROUTER_IDLE</text>
</a>
</g>
</g>
<!-- S_REQ_101_MAKE_STAR -->
<g id="node2" class="node">
<title>S_REQ_101_MAKE_STAR</title>
<g id="a_node2"><a xlink:title="{&quot;owner&quot;: &quot;MAC&quot;, &quot;role&quot;: &quot;request&quot;, &quot;description&quot;: &quot;MAC instructs the addressed arm to begin capturing microphone data for a star&quot;}">
<polygon fill="#5d8aa8" stroke="black" points="470,-516.23 287.5,-516.23 287.5,-478.23 470,-478.23 470,-516.23"/>
<text xml:space="preserve" text-anchor="middle" x="378.75" y="-498.93" font-family="Helvetica,sans-Serif" font-size="14.00">S_REQ_101_MAKE_STAR</text>
<text xml:space="preserve" text-anchor="middle" x="378.75" y="-483.93" font-family="Helvetica,sans-Serif" font-size="14.00">REQUEST_MAKE_STAR</text>
</a>
</g>
</g>
<!-- S_IDLE_ROUTER&#45;&gt;S_REQ_101_MAKE_STAR -->
<g id="edge1" class="edge">
<title>S_IDLE_ROUTER&#45;&gt;S_REQ_101_MAKE_STAR</title>
<g id="a_edge1"><a xlink:title="{&quot;trigger&quot;: &quot;mic_start_event&quot;, &quot;message&quot;: &quot;ID101 MAKE_STAR&quot;, &quot;notes&quot;: &quot;MAC selects target arm; router will append MASTER source when forwarding&quot;, &quot;payload&quot;: &quot;arm_id,speed,color,brightness,size&quot;}">
<path fill="none" stroke="black" d="M70.24,-345.58C79.85,-376.28 103.09,-435.6 145.75,-464.23 183.51,-489.56 232.51,-499.07 275.75,-501.73"/>
<polygon fill="black" stroke="black" points="275.52,-505.23 285.68,-502.22 275.87,-498.23 275.52,-505.23"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="205.75" y="-520.61" font-family="Times,serif" font-size="14.00">mic_start_event</text>
<text xml:space="preserve" text-anchor="middle" x="205.75" y="-504.11" font-family="Times,serif" font-size="14.00">ID101 MAKE_STAR</text>
</g>
<!-- S_REQ_301_START_IDLE -->
<g id="node22" class="node">
<title>S_REQ_301_START_IDLE</title>
<g id="a_node22"><a xlink:title="{&quot;owner&quot;: &quot;MAC&quot;, &quot;role&quot;: &quot;broadcast&quot;, &quot;description&quot;: &quot;MAC sends START_IDLE broadcast through the router to every device&quot;}">
<polygon fill="#5d8aa8" stroke="black" points="473.75,-346.23 283.75,-346.23 283.75,-308.23 473.75,-308.23 473.75,-346.23"/>
<text xml:space="preserve" text-anchor="middle" x="378.75" y="-328.93" font-family="Helvetica,sans-Serif" font-size="14.00">S_REQ_301_START_IDLE</text>
<text xml:space="preserve" text-anchor="middle" x="378.75" y="-313.93" font-family="Helvetica,sans-Serif" font-size="14.00">BROADCAST_START_IDLE</text>
</a>
</g>
</g>
<!-- S_IDLE_ROUTER&#45;&gt;S_REQ_301_START_IDLE -->
<g id="edge25" class="edge">
<title>S_IDLE_ROUTER&#45;&gt;S_REQ_301_START_IDLE</title>
<g id="a_edge25"><a xlink:title="{&quot;trigger&quot;: &quot;manual_idle_enable&quot;, &quot;message&quot;: &quot;ID301 START_IDLE&quot;, &quot;notes&quot;: &quot;MAC enables idle playback across all devices&quot;, &quot;payload&quot;: &quot;mode&quot;}">
<path fill="none" stroke="black" d="M128.19,-326.43C169.43,-326.56 224.26,-326.74 272.01,-326.89"/>
<polygon fill="black" stroke="black" points="271.83,-330.39 281.84,-326.92 271.85,-323.39 271.83,-330.39"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="205.75" y="-346.55" font-family="Times,serif" font-size="14.00">manual_idle_enable</text>
<text xml:space="preserve" text-anchor="middle" x="205.75" y="-330.05" font-family="Times,serif" font-size="14.00">ID301 START_IDLE</text>
</g>
<!-- S_REQ_302_STOP_IDLE -->
<g id="node24" class="node">
<title>S_REQ_302_STOP_IDLE</title>
<g id="a_node24"><a xlink:title="{&quot;owner&quot;: &quot;MAC&quot;, &quot;role&quot;: &quot;broadcast&quot;, &quot;description&quot;: &quot;MAC sends STOP_IDLE broadcast to end the idle animation&quot;}">
<polygon fill="#5d8aa8" stroke="black" points="470,-237.23 287.5,-237.23 287.5,-199.23 470,-199.23 470,-237.23"/>
<text xml:space="preserve" text-anchor="middle" x="378.75" y="-219.93" font-family="Helvetica,sans-Serif" font-size="14.00">S_REQ_302_STOP_IDLE</text>
<text xml:space="preserve" text-anchor="middle" x="378.75" y="-204.93" font-family="Helvetica,sans-Serif" font-size="14.00">BROADCAST_STOP_IDLE</text>
</a>
</g>
</g>
<!-- S_IDLE_ROUTER&#45;&gt;S_REQ_302_STOP_IDLE -->
<g id="edge28" class="edge">
<title>S_IDLE_ROUTER&#45;&gt;S_REQ_302_STOP_IDLE</title>
<g id="a_edge28"><a xlink:title="{&quot;trigger&quot;: &quot;manual_idle_disable&quot;, &quot;message&quot;: &quot;ID302 STOP_IDLE&quot;, &quot;notes&quot;: &quot;MAC stops idle playback across all devices&quot;, &quot;payload&quot;: &quot;mode&quot;}">
<path fill="none" stroke="black" d="M73.97,-306.95C86.4,-283.08 111.18,-243.47 145.75,-226.23 185.31,-206.5 233.57,-202.21 275.8,-203.75"/>
<polygon fill="black" stroke="black" points="275.58,-207.24 285.74,-204.24 275.92,-200.25 275.58,-207.24"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="205.75" y="-245.93" font-family="Times,serif" font-size="14.00">manual_idle_disable</text>
<text xml:space="preserve" text-anchor="middle" x="205.75" y="-229.43" font-family="Times,serif" font-size="14.00">ID302 STOP_IDLE</text>
</g>
<!-- S_REQ_303_PING -->
<g id="node26" class="node">
<title>S_REQ_303_PING</title>
<g id="a_node26"><a xlink:title="{&quot;owner&quot;: &quot;MAC&quot;, &quot;role&quot;: &quot;broadcast&quot;, &quot;description&quot;: &quot;MAC sends heartbeat PING broadcast for liveness checks&quot;}">
<polygon fill="#5d8aa8" stroke="black" points="449.75,-128.23 307.75,-128.23 307.75,-90.23 449.75,-90.23 449.75,-128.23"/>
<text xml:space="preserve" text-anchor="middle" x="378.75" y="-110.93" font-family="Helvetica,sans-Serif" font-size="14.00">S_REQ_303_PING</text>
<text xml:space="preserve" text-anchor="middle" x="378.75" y="-95.93" font-family="Helvetica,sans-Serif" font-size="14.00">BROADCAST_PING</text>
</a>
</g>
</g>
<!-- S_IDLE_ROUTER&#45;&gt;S_REQ_303_PING -->
<g id="edge31" class="edge">
<title>S_IDLE_ROUTER&#45;&gt;S_REQ_303_PING</title>
<g id="a_edge31"><a xlink:title="{&quot;trigger&quot;: &quot;heartbeat_tick&quot;, &quot;message&quot;: &quot;ID303 PING&quot;, &quot;notes&quot;: &quot;MAC sends heartbeat ping&quot;, &quot;payload&quot;: &quot;timestamp&quot;}">
<path fill="none" stroke="black" d="M65.71,-306.75C68.71,-264.01 82.49,-162.2 145.75,-117.23 188.63,-86.75 248.1,-85.27 296.09,-91.15"/>
<polygon fill="black" stroke="black" points="295.52,-94.6 305.9,-92.48 296.46,-87.66 295.52,-94.6"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="205.75" y="-136.93" font-family="Times,serif" font-size="14.00">heartbeat_tick</text>
<text xml:space="preserve" text-anchor="middle" x="205.75" y="-120.43" font-family="Times,serif" font-size="14.00">ID303 PING</text>
</g>
<!-- S_REQ_304_RESET -->
<g id="node28" class="node">
<title>S_REQ_304_RESET</title>
<g id="a_node28"><a xlink:title="{&quot;owner&quot;: &quot;MAC&quot;, &quot;role&quot;: &quot;broadcast&quot;, &quot;description&quot;: &quot;MAC triggers an emergency RESET broadcast across the bus&quot;}">
<polygon fill="#5d8aa8" stroke="black" points="3304.88,-648.23 3151.62,-648.23 3151.62,-610.23 3304.88,-610.23 3304.88,-648.23"/>
<text xml:space="preserve" text-anchor="middle" x="3228.25" y="-630.93" font-family="Helvetica,sans-Serif" font-size="14.00">S_REQ_304_RESET</text>
<text xml:space="preserve" text-anchor="middle" x="3228.25" y="-615.93" font-family="Helvetica,sans-Serif" font-size="14.00">BROADCAST_RESET</text>
</a>
</g>
</g>
<!-- S_IDLE_ROUTER&#45;&gt;S_REQ_304_RESET -->
<g id="edge34" class="edge">
<title>S_IDLE_ROUTER&#45;&gt;S_REQ_304_RESET</title>
<g id="a_edge34"><a xlink:title="{&quot;trigger&quot;: &quot;operator_reset&quot;, &quot;message&quot;: &quot;ID304 RESET&quot;, &quot;notes&quot;: &quot;MAC issues emergency reset broadcast&quot;, &quot;payload&quot;: &quot;reason&quot;}">
<path fill="none" stroke="black" d="M68.53,-345.49C76.76,-384.91 99.7,-476.26 145.75,-538.23 223.43,-642.76 247.52,-717.23 377.75,-717.23 377.75,-717.23 377.75,-717.23 2736.25,-717.23 2884.74,-717.23 3054.58,-677.75 3150.56,-651.68"/>
<polygon fill="black" stroke="black" points="3151.43,-655.07 3160.15,-649.05 3149.58,-648.32 3151.43,-655.07"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="1579.12" y="-736.93" font-family="Times,serif" font-size="14.00">operator_reset</text>
<text xml:space="preserve" text-anchor="middle" x="1579.12" y="-720.43" font-family="Times,serif" font-size="14.00">ID304 RESET</text>
</g>
<!-- S_CONF_201_MAKE_STAR -->
<g id="node3" class="node">
<title>S_CONF_201_MAKE_STAR</title>
<g id="a_node3"><a xlink:title="{&quot;owner&quot;: &quot;ARM&quot;, &quot;role&quot;: &quot;confirm&quot;, &quot;description&quot;: &quot;Arm confirms it has entered star buildup mode and is sampling parameters&quot;}">
<polygon fill="#f4c95d" stroke="black" points="890.25,-584.23 698.75,-584.23 698.75,-546.23 890.25,-546.23 890.25,-584.23"/>
<text xml:space="preserve" text-anchor="middle" x="794.5" y="-566.93" font-family="Helvetica,sans-Serif" font-size="14.00">S_CONF_201_MAKE_STAR</text>
<text xml:space="preserve" text-anchor="middle" x="794.5" y="-551.93" font-family="Helvetica,sans-Serif" font-size="14.00">CONFIRM_MAKE_STAR</text>
</a>
</g>
</g>
<!-- S_REQ_101_MAKE_STAR&#45;&gt;S_CONF_201_MAKE_STAR -->
<g id="edge2" class="edge">
<title>S_REQ_101_MAKE_STAR&#45;&gt;S_CONF_201_MAKE_STAR</title>
<g id="a_edge2"><a xlink:title="{&quot;trigger&quot;: &quot;arm_ack_started&quot;, &quot;message&quot;: &quot;ID201 MAKE_STAR_CONFIRM&quot;, &quot;notes&quot;: &quot;Router tags arm reply with source before relaying to MAC&quot;, &quot;payload&quot;: &quot;request_id,status&quot;}">
<path fill="none" stroke="black" d="M470.29,-512.11C534.27,-522.63 620.25,-536.76 687.45,-547.8"/>
<polygon fill="black" stroke="black" points="686.56,-551.2 696.99,-549.37 687.69,-544.29 686.56,-551.2"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="586.25" y="-564.84" font-family="Times,serif" font-size="14.00">arm_ack_started</text>
<text xml:space="preserve" text-anchor="middle" x="586.25" y="-548.34" font-family="Times,serif" font-size="14.00">ID201 MAKE_STAR_CONFIRM</text>
</g>
<!-- S_REQ_103_CANCEL_STAR -->
<g id="node6" class="node">
<title>S_REQ_103_CANCEL_STAR</title>
<g id="a_node6"><a xlink:title="{&quot;owner&quot;: &quot;MAC&quot;, &quot;role&quot;: &quot;request&quot;, &quot;description&quot;: &quot;MAC aborts a pending star buildup on the specified arm&quot;}">
<polygon fill="#5d8aa8" stroke="black" points="1678.25,-516.23 1480,-516.23 1480,-478.23 1678.25,-478.23 1678.25,-516.23"/>
<text xml:space="preserve" text-anchor="middle" x="1579.12" y="-498.93" font-family="Helvetica,sans-Serif" font-size="14.00">S_REQ_103_CANCEL_STAR</text>
<text xml:space="preserve" text-anchor="middle" x="1579.12" y="-483.93" font-family="Helvetica,sans-Serif" font-size="14.00">REQUEST_CANCEL_STAR</text>
</a>
</g>
</g>
<!-- S_REQ_101_MAKE_STAR&#45;&gt;S_REQ_103_CANCEL_STAR -->
<g id="edge21" class="edge">
<title>S_REQ_101_MAKE_STAR&#45;&gt;S_REQ_103_CANCEL_STAR</title>
<g id="a_edge21"><a xlink:title="{&quot;trigger&quot;: &quot;mac_cancel_during_capture&quot;, &quot;message&quot;: &quot;ID103 CANCEL_STAR&quot;, &quot;notes&quot;: &quot;MAC aborts star creation while capture is ongoing&quot;, &quot;payload&quot;: &quot;arm_id&quot;}">
<path fill="none" stroke="black" d="M470.31,-497.23C686.79,-497.23 1233.6,-497.23 1468.33,-497.23"/>
<polygon fill="black" stroke="black" points="1468.09,-500.73 1478.09,-497.23 1468.09,-493.73 1468.09,-500.73"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="984.75" y="-516.93" font-family="Times,serif" font-size="14.00">mac_cancel_during_capture</text>
<text xml:space="preserve" text-anchor="middle" x="984.75" y="-500.43" font-family="Times,serif" font-size="14.00">ID103 CANCEL_STAR</text>
</g>
<!-- S_REQ_102_SEND_STAR -->
<g id="node4" class="node">
<title>S_REQ_102_SEND_STAR</title>
<g id="a_node4"><a xlink:title="{&quot;owner&quot;: &quot;MAC&quot;, &quot;role&quot;: &quot;request&quot;, &quot;description&quot;: &quot;MAC orders the arm to stream the finalized star payload toward the router&quot;}">
<polygon fill="#5d8aa8" stroke="black" points="1260.25,-600.23 1079.25,-600.23 1079.25,-562.23 1260.25,-562.23 1260.25,-600.23"/>
<text xml:space="preserve" text-anchor="middle" x="1169.75" y="-582.93" font-family="Helvetica,sans-Serif" font-size="14.00">S_REQ_102_SEND_STAR</text>
<text xml:space="preserve" text-anchor="middle" x="1169.75" y="-567.93" font-family="Helvetica,sans-Serif" font-size="14.00">REQUEST_SEND_STAR</text>
</a>
</g>
</g>
<!-- S_CONF_201_MAKE_STAR&#45;&gt;S_REQ_102_SEND_STAR -->
<g id="edge3" class="edge">
<title>S_CONF_201_MAKE_STAR&#45;&gt;S_REQ_102_SEND_STAR</title>
<g id="a_edge3"><a xlink:title="{&quot;trigger&quot;: &quot;mic_session_complete&quot;, &quot;message&quot;: &quot;ID102 SEND_STAR&quot;, &quot;notes&quot;: &quot;MAC closes capture window and requests payload transfer&quot;, &quot;payload&quot;: &quot;arm_id&quot;}">
<path fill="none" stroke="black" d="M890.65,-569.31C944.81,-571.63 1012.61,-574.54 1067.71,-576.9"/>
<polygon fill="black" stroke="black" points="1067.26,-580.38 1077.4,-577.31 1067.56,-573.39 1067.26,-580.38"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="984.75" y="-596.2" font-family="Times,serif" font-size="14.00">mic_session_complete</text>
<text xml:space="preserve" text-anchor="middle" x="984.75" y="-579.7" font-family="Times,serif" font-size="14.00">ID102 SEND_STAR</text>
</g>
<!-- S_CONF_202_SEND_STAR -->
<g id="node5" class="node">
<title>S_CONF_202_SEND_STAR</title>
<g id="a_node5"><a xlink:title="{&quot;owner&quot;: &quot;ARM&quot;, &quot;role&quot;: &quot;confirm&quot;, &quot;description&quot;: &quot;Arm acknowledges SEND_STAR and starts transmission on its UART link&quot;}">
<polygon fill="#f4c95d" stroke="black" points="1674.12,-605.23 1484.12,-605.23 1484.12,-567.23 1674.12,-567.23 1674.12,-605.23"/>
<text xml:space="preserve" text-anchor="middle" x="1579.12" y="-587.93" font-family="Helvetica,sans-Serif" font-size="14.00">S_CONF_202_SEND_STAR</text>
<text xml:space="preserve" text-anchor="middle" x="1579.12" y="-572.93" font-family="Helvetica,sans-Serif" font-size="14.00">CONFIRM_SEND_STAR</text>
</a>
</g>
</g>
<!-- S_REQ_102_SEND_STAR&#45;&gt;S_CONF_202_SEND_STAR -->
<g id="edge4" class="edge">
<title>S_REQ_102_SEND_STAR&#45;&gt;S_CONF_202_SEND_STAR</title>
<g id="a_edge4"><a xlink:title="{&quot;trigger&quot;: &quot;arm_ack_payload&quot;, &quot;message&quot;: &quot;ID202 SEND_STAR_CONFIRM&quot;, &quot;notes&quot;: &quot;Router holds context until arm confirms transmission start&quot;, &quot;payload&quot;: &quot;request_id,status&quot;}">
<path fill="none" stroke="black" d="M1260.65,-582.33C1323.23,-583.1 1406.89,-584.13 1472.63,-584.93"/>
<polygon fill="black" stroke="black" points="1472.29,-588.43 1482.33,-585.05 1472.38,-581.43 1472.29,-588.43"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="1370.12" y="-604.45" font-family="Times,serif" font-size="14.00">arm_ack_payload</text>
<text xml:space="preserve" text-anchor="middle" x="1370.12" y="-587.95" font-family="Times,serif" font-size="14.00">ID202 SEND_STAR_CONFIRM</text>
</g>
<!-- S_REQ_102_SEND_STAR&#45;&gt;S_REQ_103_CANCEL_STAR -->
<g id="edge22" class="edge">
<title>S_REQ_102_SEND_STAR&#45;&gt;S_REQ_103_CANCEL_STAR</title>
<g id="a_edge22"><a xlink:title="{&quot;trigger&quot;: &quot;mac_cancel_during_send&quot;, &quot;message&quot;: &quot;ID103 CANCEL_STAR&quot;, &quot;notes&quot;: &quot;MAC aborts star creation while payload is in flight&quot;, &quot;payload&quot;: &quot;arm_id&quot;}">
<path fill="none" stroke="black" d="M1223.01,-561.81C1240.4,-555.86 1260,-549.71 1278.25,-545.23 1340.53,-529.93 1411.33,-518.33 1468.49,-510.37"/>
<polygon fill="black" stroke="black" points="1468.8,-513.86 1478.24,-509.03 1467.85,-506.93 1468.8,-513.86"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="1370.12" y="-564.93" font-family="Times,serif" font-size="14.00">mac_cancel_during_send</text>
<text xml:space="preserve" text-anchor="middle" x="1370.12" y="-548.43" font-family="Times,serif" font-size="14.00">ID103 CANCEL_STAR</text>
</g>
<!-- S_ERR_500_COMM_ERROR -->
<g id="node30" class="node">
<title>S_ERR_500_COMM_ERROR</title>
<g id="a_node30"><a xlink:title="{&quot;owner&quot;: &quot;ROUTER&quot;, &quot;role&quot;: &quot;error&quot;, &quot;description&quot;: &quot;Router surfaces communication errors or timeouts to the MAC for recovery&quot;}">
<polygon fill="#f28c28" stroke="black" points="2835.5,-648.23 2635,-648.23 2635,-610.23 2835.5,-610.23 2835.5,-648.23"/>
<text xml:space="preserve" text-anchor="middle" x="2735.25" y="-630.93" font-family="Helvetica,sans-Serif" font-size="14.00">S_ERR_500_COMM_ERROR</text>
<text xml:space="preserve" text-anchor="middle" x="2735.25" y="-615.93" font-family="Helvetica,sans-Serif" font-size="14.00">COMM_ERROR</text>
</a>
</g>
</g>
<!-- S_REQ_102_SEND_STAR&#45;&gt;S_ERR_500_COMM_ERROR -->
<g id="edge37" class="edge">
<title>S_REQ_102_SEND_STAR&#45;&gt;S_ERR_500_COMM_ERROR</title>
<g id="a_edge37"><a xlink:title="{&quot;trigger&quot;: &quot;router_timeout&quot;, &quot;message&quot;: &quot;ID500 COMM_ERROR&quot;, &quot;notes&quot;: &quot;Router escalates timeout while waiting for SEND_STAR payload&quot;, &quot;payload&quot;: &quot;device_id,error_code,error_text&quot;}">
<path fill="none" stroke="black" d="M1214.15,-600.64C1233.43,-608.51 1256.61,-616.96 1278.25,-622.23 1408.58,-653.93 1443.99,-656.23 1578.12,-656.23 1578.12,-656.23 1578.12,-656.23 2337,-656.23 2461.6,-656.23 2492.8,-652.21 2617,-642.23 2619.05,-642.06 2621.13,-641.89 2623.22,-641.71"/>
<polygon fill="black" stroke="black" points="2623.35,-645.22 2633,-640.84 2622.72,-638.24 2623.35,-645.22"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="2020.38" y="-675.93" font-family="Times,serif" font-size="14.00">router_timeout</text>
<text xml:space="preserve" text-anchor="middle" x="2020.38" y="-659.43" font-family="Times,serif" font-size="14.00">ID500 COMM_ERROR</text>
</g>
<!-- S_REQ_104_STAR_ARRIVED -->
<g id="node8" class="node">
<title>S_REQ_104_STAR_ARRIVED</title>
<g id="a_node8"><a xlink:title="{&quot;owner&quot;: &quot;ARM&quot;, &quot;role&quot;: &quot;notify&quot;, &quot;description&quot;: &quot;Arm reports that its star payload reached the centerpiece ingress queue&quot;}">
<polygon fill="#f4c95d" stroke="black" points="2122.12,-551.23 1918.62,-551.23 1918.62,-513.23 2122.12,-513.23 2122.12,-551.23"/>
<text xml:space="preserve" text-anchor="middle" x="2020.38" y="-533.93" font-family="Helvetica,sans-Serif" font-size="14.00">S_REQ_104_STAR_ARRIVED</text>
<text xml:space="preserve" text-anchor="middle" x="2020.38" y="-518.93" font-family="Helvetica,sans-Serif" font-size="14.00">REPORT_STAR_ARRIVED</text>
</a>
</g>
</g>
<!-- S_CONF_202_SEND_STAR&#45;&gt;S_REQ_104_STAR_ARRIVED -->
<g id="edge6" class="edge">
<title>S_CONF_202_SEND_STAR&#45;&gt;S_REQ_104_STAR_ARRIVED</title>
<g id="a_edge6"><a xlink:title="{&quot;trigger&quot;: &quot;arm_status_forward&quot;, &quot;message&quot;: &quot;ID104 STAR_ARRIVED&quot;, &quot;notes&quot;: &quot;Router pushes arm perspective update upstream to MAC&quot;, &quot;payload&quot;: &quot;arm_id,speed,color,brightness,size&quot;}">
<path fill="none" stroke="black" d="M1619.1,-566.79C1641.15,-556.82 1669.58,-545.66 1696.25,-540.23 1765.23,-526.18 1844.19,-523.98 1906.79,-525.39"/>
<polygon fill="black" stroke="black" points="1906.68,-528.88 1916.77,-525.65 1906.87,-521.89 1906.68,-528.88"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="1797.5" y="-559.93" font-family="Times,serif" font-size="14.00">arm_status_forward</text>
<text xml:space="preserve" text-anchor="middle" x="1797.5" y="-543.43" font-family="Times,serif" font-size="14.00">ID104 STAR_ARRIVED</text>
</g>
<!-- S_REQ_105_ADD_STAR -->
<g id="node9" class="node">
<title>S_REQ_105_ADD_STAR</title>
<g id="a_node9"><a xlink:title="{&quot;owner&quot;: &quot;MAC&quot;, &quot;role&quot;: &quot;request&quot;, &quot;description&quot;: &quot;MAC forwards ADD_STAR toward CENTER or TOP after router rewrites addressing&quot;}">
<polygon fill="#5d8aa8" stroke="black" points="2422,-557.23 2250,-557.23 2250,-519.23 2422,-519.23 2422,-557.23"/>
<text xml:space="preserve" text-anchor="middle" x="2336" y="-539.93" font-family="Helvetica,sans-Serif" font-size="14.00">S_REQ_105_ADD_STAR</text>
<text xml:space="preserve" text-anchor="middle" x="2336" y="-524.93" font-family="Helvetica,sans-Serif" font-size="14.00">REQUEST_ADD_STAR</text>
</a>
</g>
</g>
<!-- S_CONF_202_SEND_STAR&#45;&gt;S_REQ_105_ADD_STAR -->
<g id="edge5" class="edge">
<title>S_CONF_202_SEND_STAR&#45;&gt;S_REQ_105_ADD_STAR</title>
<g id="a_edge5"><a xlink:title="{&quot;trigger&quot;: &quot;router_dispatch_to_center&quot;, &quot;message&quot;: &quot;ID105 ADD_STAR&quot;, &quot;notes&quot;: &quot;Router rewrites destination to CENTER or TOP and forwards bulk payload&quot;, &quot;payload&quot;: &quot;device_id,star_payload&quot;}">
<path fill="none" stroke="black" d="M1674.62,-585.78C1801.71,-584.29 2034.56,-578.43 2232,-556.23 2234.07,-556 2236.17,-555.75 2238.28,-555.48"/>
<polygon fill="black" stroke="black" points="2238.73,-558.96 2248.18,-554.16 2237.81,-552.02 2238.73,-558.96"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="2020.38" y="-598.55" font-family="Times,serif" font-size="14.00">router_dispatch_to_center</text>
<text xml:space="preserve" text-anchor="middle" x="2020.38" y="-582.05" font-family="Times,serif" font-size="14.00">ID105 ADD_STAR</text>
</g>
<!-- S_CONF_203_CANCEL_STAR -->
<g id="node7" class="node">
<title>S_CONF_203_CANCEL_STAR</title>
<g id="a_node7"><a xlink:title="{&quot;owner&quot;: &quot;ARM&quot;, &quot;role&quot;: &quot;confirm&quot;, &quot;description&quot;: &quot;Arm reports cancellation completed and local buffers cleared&quot;}">
<polygon fill="#f4c95d" stroke="black" points="2124,-487.23 1916.75,-487.23 1916.75,-449.23 2124,-449.23 2124,-487.23"/>
<text xml:space="preserve" text-anchor="middle" x="2020.38" y="-469.93" font-family="Helvetica,sans-Serif" font-size="14.00">S_CONF_203_CANCEL_STAR</text>
<text xml:space="preserve" text-anchor="middle" x="2020.38" y="-454.93" font-family="Helvetica,sans-Serif" font-size="14.00">CONFIRM_CANCEL_STAR</text>
</a>
</g>
</g>
<!-- S_REQ_103_CANCEL_STAR&#45;&gt;S_CONF_203_CANCEL_STAR -->
<g id="edge23" class="edge">
<title>S_REQ_103_CANCEL_STAR&#45;&gt;S_CONF_203_CANCEL_STAR</title>
<g id="a_edge23"><a xlink:title="{&quot;trigger&quot;: &quot;arm_ack_cancel&quot;, &quot;message&quot;: &quot;ID203 CANCEL_STAR_CONFIRM&quot;, &quot;notes&quot;: &quot;Arm confirms cancellation&quot;, &quot;payload&quot;: &quot;request_id,status&quot;}">
<path fill="none" stroke="black" d="M1678.6,-485.78C1684.57,-485.22 1690.49,-484.69 1696.25,-484.23 1765.42,-478.65 1843.1,-474.73 1904.95,-472.17"/>
<polygon fill="black" stroke="black" points="1904.95,-475.67 1914.8,-471.76 1904.67,-468.67 1904.95,-475.67"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="1797.5" y="-503.93" font-family="Times,serif" font-size="14.00">arm_ack_cancel</text>
<text xml:space="preserve" text-anchor="middle" x="1797.5" y="-487.43" font-family="Times,serif" font-size="14.00">ID203 CANCEL_STAR_CONFIRM</text>
</g>
<!-- S_CONF_203_CANCEL_STAR&#45;&gt;S_IDLE_ROUTER -->
<g id="edge24" class="edge">
<title>S_CONF_203_CANCEL_STAR&#45;&gt;S_IDLE_ROUTER</title>
<g id="a_edge24"><a xlink:title="{&quot;trigger&quot;: &quot;router_drop_context&quot;, &quot;message&quot;: &quot;&quot;, &quot;notes&quot;: &quot;Router clears cancelled star context&quot;, &quot;payload&quot;: &quot;&quot;}">
<path fill="none" stroke="black" d="M1916.47,-461.63C1827.49,-456.49 1695.37,-450.23 1580.12,-450.23 377.75,-450.23 377.75,-450.23 377.75,-450.23 274.09,-450.23 236.87,-475.65 145.75,-426.23 116.34,-410.28 93.65,-378.75 79.89,-355.33"/>
<polygon fill="black" stroke="black" points="83.08,-353.86 75.12,-346.87 76.98,-357.3 83.08,-353.86"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="984.75" y="-453.43" font-family="Times,serif" font-size="14.00">router_drop_context</text>
</g>
<!-- S_REQ_104_STAR_ARRIVED&#45;&gt;S_REQ_105_ADD_STAR -->
<g id="edge7" class="edge">
<title>S_REQ_104_STAR_ARRIVED&#45;&gt;S_REQ_105_ADD_STAR</title>
<g id="a_edge7"><a xlink:title="{&quot;trigger&quot;: &quot;router_autoroute&quot;, &quot;message&quot;: &quot;&quot;, &quot;notes&quot;: &quot;Status update primes MAC to ensure ADD_STAR fan&#45;out continues&quot;, &quot;payload&quot;: &quot;&quot;}">
<path fill="none" stroke="black" d="M2122.33,-534.16C2159.58,-534.87 2201.66,-535.68 2238.5,-536.38"/>
<polygon fill="black" stroke="black" points="2238.17,-539.88 2248.24,-536.57 2238.3,-532.88 2238.17,-539.88"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="2187" y="-539.32" font-family="Times,serif" font-size="14.00">router_autoroute</text>
</g>
<!-- S_CONF_205_ADD_STAR -->
<g id="node10" class="node">
<title>S_CONF_205_ADD_STAR</title>
<g id="a_node10"><a xlink:title="{&quot;owner&quot;: &quot;CENTER&quot;, &quot;role&quot;: &quot;confirm&quot;, &quot;description&quot;: &quot;Center or Top confirms the star payload has been stored safely&quot;}">
<polygon fill="#5d8aa8" stroke="black" points="2825.75,-550.23 2644.75,-550.23 2644.75,-512.23 2825.75,-512.23 2825.75,-550.23"/>
<text xml:space="preserve" text-anchor="middle" x="2735.25" y="-532.93" font-family="Helvetica,sans-Serif" font-size="14.00">S_CONF_205_ADD_STAR</text>
<text xml:space="preserve" text-anchor="middle" x="2735.25" y="-517.93" font-family="Helvetica,sans-Serif" font-size="14.00">CONFIRM_ADD_STAR</text>
</a>
</g>
</g>
<!-- S_REQ_105_ADD_STAR&#45;&gt;S_CONF_205_ADD_STAR -->
<g id="edge8" class="edge">
<title>S_REQ_105_ADD_STAR&#45;&gt;S_CONF_205_ADD_STAR</title>
<g id="a_edge8"><a xlink:title="{&quot;trigger&quot;: &quot;center_ack_buffered&quot;, &quot;message&quot;: &quot;ID205 ADD_STAR_CONFIRM&quot;, &quot;notes&quot;: &quot;Centerpiece confirms storage; router clears pending payload flag&quot;, &quot;payload&quot;: &quot;request_id,status&quot;}">
<path fill="none" stroke="black" d="M2422.22,-536.73C2484.07,-535.64 2567.99,-534.16 2633.22,-533.01"/>
<polygon fill="black" stroke="black" points="2632.89,-536.52 2642.83,-532.84 2632.77,-529.52 2632.89,-536.52"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="2528.5" y="-556.05" font-family="Times,serif" font-size="14.00">center_ack_buffered</text>
<text xml:space="preserve" text-anchor="middle" x="2528.5" y="-539.55" font-family="Times,serif" font-size="14.00">ID205 ADD_STAR_CONFIRM</text>
</g>
<!-- S_REQ_105_ADD_STAR&#45;&gt;S_ERR_500_COMM_ERROR -->
<g id="edge38" class="edge">
<title>S_REQ_105_ADD_STAR&#45;&gt;S_ERR_500_COMM_ERROR</title>
<g id="a_edge38"><a xlink:title="{&quot;trigger&quot;: &quot;center_timeout&quot;, &quot;message&quot;: &quot;ID500 COMM_ERROR&quot;, &quot;notes&quot;: &quot;Router escalates timeout waiting for center or top ACK&quot;, &quot;payload&quot;: &quot;device_id,error_code,error_text&quot;}">
<path fill="none" stroke="black" d="M2389.5,-557.64C2405.56,-563.16 2423.38,-568.85 2440,-573.23 2474.18,-582.24 2555.02,-597.47 2623.34,-609.78"/>
<polygon fill="black" stroke="black" points="2622.67,-613.21 2633.13,-611.53 2623.91,-606.32 2622.67,-613.21"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="2528.5" y="-627.29" font-family="Times,serif" font-size="14.00">center_timeout</text>
<text xml:space="preserve" text-anchor="middle" x="2528.5" y="-610.79" font-family="Times,serif" font-size="14.00">ID500 COMM_ERROR</text>
</g>
<!-- S_REQ_106_BUILDUP_CLIMAX_CENTER -->
<g id="node11" class="node">
<title>S_REQ_106_BUILDUP_CLIMAX_CENTER</title>
<g id="a_node11"><a xlink:title="{&quot;owner&quot;: &quot;MAC&quot;, &quot;role&quot;: &quot;request&quot;, &quot;description&quot;: &quot;MAC accelerates centerpiece buildup animation tempo&quot;}">
<polygon fill="#5d8aa8" stroke="black" points="3368.25,-522.23 3088.25,-522.23 3088.25,-484.23 3368.25,-484.23 3368.25,-522.23"/>
<text xml:space="preserve" text-anchor="middle" x="3228.25" y="-504.93" font-family="Helvetica,sans-Serif" font-size="14.00">S_REQ_106_BUILDUP_CLIMAX_CENTER</text>
<text xml:space="preserve" text-anchor="middle" x="3228.25" y="-489.93" font-family="Helvetica,sans-Serif" font-size="14.00">REQUEST_BUILDUP_CLIMAX_CENTER</text>
</a>
</g>
</g>
<!-- S_CONF_205_ADD_STAR&#45;&gt;S_REQ_106_BUILDUP_CLIMAX_CENTER -->
<g id="edge9" class="edge">
<title>S_CONF_205_ADD_STAR&#45;&gt;S_REQ_106_BUILDUP_CLIMAX_CENTER</title>
<g id="a_edge9"><a xlink:title="{&quot;trigger&quot;: &quot;mac_drives_buildup&quot;, &quot;message&quot;: &quot;ID106 BUILDUP_CLIMAX_CENTER&quot;, &quot;notes&quot;: &quot;MAC advances buildup pacing once minimum stars arrive&quot;, &quot;payload&quot;: &quot;buildup_time_ms&quot;}">
<path fill="none" stroke="black" d="M2826.02,-526.11C2895.93,-522.12 2994.53,-516.5 3076.48,-511.83"/>
<polygon fill="black" stroke="black" points="3076.64,-515.32 3086.42,-511.26 3076.24,-508.34 3076.64,-515.32"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="2961.88" y="-544.16" font-family="Times,serif" font-size="14.00">mac_drives_buildup</text>
<text xml:space="preserve" text-anchor="middle" x="2961.88" y="-527.66" font-family="Times,serif" font-size="14.00">ID106 BUILDUP_CLIMAX_CENTER</text>
</g>
<!-- S_CONF_206_BUILDUP_CLIMAX_CENTER -->
<g id="node12" class="node">
<title>S_CONF_206_BUILDUP_CLIMAX_CENTER</title>
<g id="a_node12"><a xlink:title="{&quot;owner&quot;: &quot;CENTER&quot;, &quot;role&quot;: &quot;confirm&quot;, &quot;description&quot;: &quot;Centerpiece acknowledges the buildup speed change&quot;}">
<polygon fill="#5d8aa8" stroke="black" points="3979,-447.23 3690,-447.23 3690,-409.23 3979,-409.23 3979,-447.23"/>
<text xml:space="preserve" text-anchor="middle" x="3834.5" y="-429.93" font-family="Helvetica,sans-Serif" font-size="14.00">S_CONF_206_BUILDUP_CLIMAX_CENTER</text>
<text xml:space="preserve" text-anchor="middle" x="3834.5" y="-414.93" font-family="Helvetica,sans-Serif" font-size="14.00">CONFIRM_BUILDUP_CLIMAX_CENTER</text>
</a>
</g>
</g>
<!-- S_REQ_106_BUILDUP_CLIMAX_CENTER&#45;&gt;S_CONF_206_BUILDUP_CLIMAX_CENTER -->
<g id="edge10" class="edge">
<title>S_REQ_106_BUILDUP_CLIMAX_CENTER&#45;&gt;S_CONF_206_BUILDUP_CLIMAX_CENTER</title>
<g id="a_edge10"><a xlink:title="{&quot;trigger&quot;: &quot;center_ack_buildup&quot;, &quot;message&quot;: &quot;ID206 BUILDUP_CLIMAX_CENTER_CONFIRM&quot;, &quot;notes&quot;: &quot;Centerpiece confirms new buildup timing&quot;, &quot;payload&quot;: &quot;request_id,status&quot;}">
<path fill="none" stroke="black" d="M3368.64,-485.93C3461.17,-474.44 3582.73,-459.36 3678.33,-447.49"/>
<polygon fill="black" stroke="black" points="3678.57,-450.99 3688.06,-446.28 3677.71,-444.04 3678.57,-450.99"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="3529.12" y="-502.81" font-family="Times,serif" font-size="14.00">center_ack_buildup</text>
<text xml:space="preserve" text-anchor="middle" x="3529.12" y="-486.31" font-family="Times,serif" font-size="14.00">ID206 BUILDUP_CLIMAX_CENTER_CONFIRM</text>
</g>
<!-- S_REQ_107_CLIMAX_READY -->
<g id="node13" class="node">
<title>S_REQ_107_CLIMAX_READY</title>
<g id="a_node13"><a xlink:title="{&quot;owner&quot;: &quot;CENTER&quot;, &quot;role&quot;: &quot;notify&quot;, &quot;description&quot;: &quot;Centerpiece announces that the climax threshold has been reached&quot;}">
<polygon fill="#5d8aa8" stroke="black" points="4365.5,-443.23 4160.5,-443.23 4160.5,-405.23 4365.5,-405.23 4365.5,-443.23"/>
<text xml:space="preserve" text-anchor="middle" x="4263" y="-425.93" font-family="Helvetica,sans-Serif" font-size="14.00">S_REQ_107_CLIMAX_READY</text>
<text xml:space="preserve" text-anchor="middle" x="4263" y="-410.93" font-family="Helvetica,sans-Serif" font-size="14.00">REPORT_CLIMAX_READY</text>
</a>
</g>
</g>
<!-- S_CONF_206_BUILDUP_CLIMAX_CENTER&#45;&gt;S_REQ_107_CLIMAX_READY -->
<g id="edge11" class="edge">
<title>S_CONF_206_BUILDUP_CLIMAX_CENTER&#45;&gt;S_REQ_107_CLIMAX_READY</title>
<g id="a_edge11"><a xlink:title="{&quot;trigger&quot;: &quot;center_threshold_met&quot;, &quot;message&quot;: &quot;ID107 CLIMAX_READY&quot;, &quot;notes&quot;: &quot;Centerpiece notifies MAC that climax conditions are satisfied&quot;, &quot;payload&quot;: &quot;star_count,energy_level&quot;}">
<path fill="none" stroke="black" d="M3979.3,-426.88C4034.61,-426.36 4096.92,-425.78 4148.94,-425.29"/>
<polygon fill="black" stroke="black" points="4148.73,-428.79 4158.7,-425.2 4148.67,-421.79 4148.73,-428.79"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="4069.75" y="-446.41" font-family="Times,serif" font-size="14.00">center_threshold_met</text>
<text xml:space="preserve" text-anchor="middle" x="4069.75" y="-429.91" font-family="Times,serif" font-size="14.00">ID107 CLIMAX_READY</text>
</g>
<!-- S_REQ_108_START_CLIMAX_CENTER -->
<g id="node14" class="node">
<title>S_REQ_108_START_CLIMAX_CENTER</title>
<g id="a_node14"><a xlink:title="{&quot;owner&quot;: &quot;MAC&quot;, &quot;role&quot;: &quot;request&quot;, &quot;description&quot;: &quot;MAC authorizes the centerpiece to eject queued stars toward the top piece&quot;}">
<polygon fill="#5d8aa8" stroke="black" points="4868.25,-440.23 4602.5,-440.23 4602.5,-402.23 4868.25,-402.23 4868.25,-440.23"/>
<text xml:space="preserve" text-anchor="middle" x="4735.38" y="-422.93" font-family="Helvetica,sans-Serif" font-size="14.00">S_REQ_108_START_CLIMAX_CENTER</text>
<text xml:space="preserve" text-anchor="middle" x="4735.38" y="-407.93" font-family="Helvetica,sans-Serif" font-size="14.00">REQUEST_START_CLIMAX_CENTER</text>
</a>
</g>
</g>
<!-- S_REQ_107_CLIMAX_READY&#45;&gt;S_REQ_108_START_CLIMAX_CENTER -->
<g id="edge12" class="edge">
<title>S_REQ_107_CLIMAX_READY&#45;&gt;S_REQ_108_START_CLIMAX_CENTER</title>
<g id="a_edge12"><a xlink:title="{&quot;trigger&quot;: &quot;mac_authorizes_climax&quot;, &quot;message&quot;: &quot;ID108 START_CLIMAX_CENTER&quot;, &quot;notes&quot;: &quot;MAC grants centerpiece permission to start ejecting stars&quot;, &quot;payload&quot;: &quot;climax_time_ms&quot;}">
<path fill="none" stroke="black" d="M4365.77,-423.58C4431.68,-423.16 4518.47,-422.61 4591.28,-422.14"/>
<polygon fill="black" stroke="black" points="4590.89,-425.64 4600.87,-422.08 4590.84,-418.64 4590.89,-425.64"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="4484" y="-443.12" font-family="Times,serif" font-size="14.00">mac_authorizes_climax</text>
<text xml:space="preserve" text-anchor="middle" x="4484" y="-426.62" font-family="Times,serif" font-size="14.00">ID108 START_CLIMAX_CENTER</text>
</g>
<!-- S_CONF_208_START_CLIMAX_CENTER -->
<g id="node15" class="node">
<title>S_CONF_208_START_CLIMAX_CENTER</title>
<g id="a_node15"><a xlink:title="{&quot;owner&quot;: &quot;CENTER&quot;, &quot;role&quot;: &quot;confirm&quot;, &quot;description&quot;: &quot;Centerpiece confirms it has started ejecting stars during climax&quot;}">
<polygon fill="#5d8aa8" stroke="black" points="5449,-440.23 5174.25,-440.23 5174.25,-402.23 5449,-402.23 5449,-440.23"/>
<text xml:space="preserve" text-anchor="middle" x="5311.62" y="-422.93" font-family="Helvetica,sans-Serif" font-size="14.00">S_CONF_208_START_CLIMAX_CENTER</text>
<text xml:space="preserve" text-anchor="middle" x="5311.62" y="-407.93" font-family="Helvetica,sans-Serif" font-size="14.00">CONFIRM_START_CLIMAX_CENTER</text>
</a>
</g>
</g>
<!-- S_REQ_108_START_CLIMAX_CENTER&#45;&gt;S_CONF_208_START_CLIMAX_CENTER -->
<g id="edge13" class="edge">
<title>S_REQ_108_START_CLIMAX_CENTER&#45;&gt;S_CONF_208_START_CLIMAX_CENTER</title>
<g id="a_edge13"><a xlink:title="{&quot;trigger&quot;: &quot;center_ack_climax&quot;, &quot;message&quot;: &quot;ID208 START_CLIMAX_CENTER_CONFIRM&quot;, &quot;notes&quot;: &quot;Centerpiece confirms climax execution&quot;, &quot;payload&quot;: &quot;request_id,status&quot;}">
<path fill="none" stroke="black" d="M4868.48,-421.23C4956.31,-421.23 5071.77,-421.23 5162.68,-421.23"/>
<polygon fill="black" stroke="black" points="5162.41,-424.73 5172.41,-421.23 5162.41,-417.73 5162.41,-424.73"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="5021.25" y="-440.93" font-family="Times,serif" font-size="14.00">center_ack_climax</text>
<text xml:space="preserve" text-anchor="middle" x="5021.25" y="-424.43" font-family="Times,serif" font-size="14.00">ID208 START_CLIMAX_CENTER_CONFIRM</text>
</g>
<!-- S_REQ_109_START_CLIMAX_TOP -->
<g id="node16" class="node">
<title>S_REQ_109_START_CLIMAX_TOP</title>
<g id="a_node16"><a xlink:title="{&quot;owner&quot;: &quot;MAC&quot;, &quot;role&quot;: &quot;request&quot;, &quot;description&quot;: &quot;MAC commands the top piece to start its launch choreography&quot;}">
<polygon fill="#5d8aa8" stroke="black" points="5897,-440.23 5659,-440.23 5659,-402.23 5897,-402.23 5897,-440.23"/>
<text xml:space="preserve" text-anchor="middle" x="5778" y="-422.93" font-family="Helvetica,sans-Serif" font-size="14.00">S_REQ_109_START_CLIMAX_TOP</text>
<text xml:space="preserve" text-anchor="middle" x="5778" y="-407.93" font-family="Helvetica,sans-Serif" font-size="14.00">REQUEST_START_CLIMAX_TOP</text>
</a>
</g>
</g>
<!-- S_CONF_208_START_CLIMAX_CENTER&#45;&gt;S_REQ_109_START_CLIMAX_TOP -->
<g id="edge14" class="edge">
<title>S_CONF_208_START_CLIMAX_CENTER&#45;&gt;S_REQ_109_START_CLIMAX_TOP</title>
<g id="a_edge14"><a xlink:title="{&quot;trigger&quot;: &quot;mac_orchestrates_top&quot;, &quot;message&quot;: &quot;ID109 START_CLIMAX_TOP&quot;, &quot;notes&quot;: &quot;Router retargets command to TOP with MASTER source header&quot;, &quot;payload&quot;: &quot;climax_time_ms&quot;}">
<path fill="none" stroke="black" d="M5449.44,-421.23C5512.03,-421.23 5585.81,-421.23 5647.48,-421.23"/>
<polygon fill="black" stroke="black" points="5647.34,-424.73 5657.34,-421.23 5647.34,-417.73 5647.34,-424.73"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="5554" y="-440.93" font-family="Times,serif" font-size="14.00">mac_orchestrates_top</text>
<text xml:space="preserve" text-anchor="middle" x="5554" y="-424.43" font-family="Times,serif" font-size="14.00">ID109 START_CLIMAX_TOP</text>
</g>
<!-- S_CONF_209_START_CLIMAX_TOP -->
<g id="node17" class="node">
<title>S_CONF_209_START_CLIMAX_TOP</title>
<g id="a_node17"><a xlink:title="{&quot;owner&quot;: &quot;TOP&quot;, &quot;role&quot;: &quot;confirm&quot;, &quot;description&quot;: &quot;Top piece confirms the climax launch sequence is running&quot;}">
<polygon fill="#f28c28" stroke="black" points="6423,-440.23 6176,-440.23 6176,-402.23 6423,-402.23 6423,-440.23"/>
<text xml:space="preserve" text-anchor="middle" x="6299.5" y="-422.93" font-family="Helvetica,sans-Serif" font-size="14.00">S_CONF_209_START_CLIMAX_TOP</text>
<text xml:space="preserve" text-anchor="middle" x="6299.5" y="-407.93" font-family="Helvetica,sans-Serif" font-size="14.00">CONFIRM_START_CLIMAX_TOP</text>
</a>
</g>
</g>
<!-- S_REQ_109_START_CLIMAX_TOP&#45;&gt;S_CONF_209_START_CLIMAX_TOP -->
<g id="edge15" class="edge">
<title>S_REQ_109_START_CLIMAX_TOP&#45;&gt;S_CONF_209_START_CLIMAX_TOP</title>
<g id="a_edge15"><a xlink:title="{&quot;trigger&quot;: &quot;top_ack_launch&quot;, &quot;message&quot;: &quot;ID209 START_CLIMAX_TOP_CONFIRM&quot;, &quot;notes&quot;: &quot;Top piece confirms launch sequence&quot;, &quot;payload&quot;: &quot;request_id,status&quot;}">
<path fill="none" stroke="black" d="M5897.21,-421.23C5976.71,-421.23 6081.67,-421.23 6164.31,-421.23"/>
<polygon fill="black" stroke="black" points="6164.3,-424.73 6174.3,-421.23 6164.3,-417.73 6164.3,-424.73"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="6036.5" y="-440.93" font-family="Times,serif" font-size="14.00">top_ack_launch</text>
<text xml:space="preserve" text-anchor="middle" x="6036.5" y="-424.43" font-family="Times,serif" font-size="14.00">ID209 START_CLIMAX_TOP_CONFIRM</text>
</g>
<!-- S_REQ_110_STOP_CLIMAX_CENTER -->
<g id="node18" class="node">
<title>S_REQ_110_STOP_CLIMAX_CENTER</title>
<g id="a_node18"><a xlink:title="{&quot;owner&quot;: &quot;MAC&quot;, &quot;role&quot;: &quot;request&quot;, &quot;description&quot;: &quot;MAC issues a manual stop for the centerpiece climax motion&quot;}">
<polygon fill="#5d8aa8" stroke="black" points="6908.5,-440.23 6650.25,-440.23 6650.25,-402.23 6908.5,-402.23 6908.5,-440.23"/>
<text xml:space="preserve" text-anchor="middle" x="6779.38" y="-422.93" font-family="Helvetica,sans-Serif" font-size="14.00">S_REQ_110_STOP_CLIMAX_CENTER</text>
<text xml:space="preserve" text-anchor="middle" x="6779.38" y="-407.93" font-family="Helvetica,sans-Serif" font-size="14.00">REQUEST_STOP_CLIMAX_CENTER</text>
</a>
</g>
</g>
<!-- S_CONF_209_START_CLIMAX_TOP&#45;&gt;S_REQ_110_STOP_CLIMAX_CENTER -->
<g id="edge16" class="edge">
<title>S_CONF_209_START_CLIMAX_TOP&#45;&gt;S_REQ_110_STOP_CLIMAX_CENTER</title>
<g id="a_edge16"><a xlink:title="{&quot;trigger&quot;: &quot;mac_manual_override&quot;, &quot;message&quot;: &quot;ID110 STOP_CLIMAX_CENTER&quot;, &quot;notes&quot;: &quot;MAC issues center stop when manual override is triggered&quot;, &quot;payload&quot;: &quot;reason&quot;}">
<path fill="none" stroke="black" d="M6423.25,-421.23C6489.14,-421.23 6570.6,-421.23 6638.87,-421.23"/>
<polygon fill="black" stroke="black" points="6638.63,-424.73 6648.63,-421.23 6638.63,-417.73 6638.63,-424.73"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="6536.62" y="-440.93" font-family="Times,serif" font-size="14.00">mac_manual_override</text>
<text xml:space="preserve" text-anchor="middle" x="6536.62" y="-424.43" font-family="Times,serif" font-size="14.00">ID110 STOP_CLIMAX_CENTER</text>
</g>
<!-- S_CONF_210_STOP_CLIMAX_CENTER -->
<g id="node19" class="node">
<title>S_CONF_210_STOP_CLIMAX_CENTER</title>
<g id="a_node19"><a xlink:title="{&quot;owner&quot;: &quot;CENTER&quot;, &quot;role&quot;: &quot;confirm&quot;, &quot;description&quot;: &quot;Centerpiece reports it halted the climax routine&quot;}">
<polygon fill="#5d8aa8" stroke="black" points="7472,-440.23 7204.75,-440.23 7204.75,-402.23 7472,-402.23 7472,-440.23"/>
<text xml:space="preserve" text-anchor="middle" x="7338.38" y="-422.93" font-family="Helvetica,sans-Serif" font-size="14.00">S_CONF_210_STOP_CLIMAX_CENTER</text>
<text xml:space="preserve" text-anchor="middle" x="7338.38" y="-407.93" font-family="Helvetica,sans-Serif" font-size="14.00">CONFIRM_STOP_CLIMAX_CENTER</text>
</a>
</g>
</g>
<!-- S_REQ_110_STOP_CLIMAX_CENTER&#45;&gt;S_CONF_210_STOP_CLIMAX_CENTER -->
<g id="edge17" class="edge">
<title>S_REQ_110_STOP_CLIMAX_CENTER&#45;&gt;S_CONF_210_STOP_CLIMAX_CENTER</title>
<g id="a_edge17"><a xlink:title="{&quot;trigger&quot;: &quot;center_ack_stop&quot;, &quot;message&quot;: &quot;ID210 STOP_CLIMAX_CENTER_CONFIRM&quot;, &quot;notes&quot;: &quot;Centerpiece halts climax operations&quot;, &quot;payload&quot;: &quot;request_id,status&quot;}">
<path fill="none" stroke="black" d="M6908.86,-421.23C6993.81,-421.23 7105.3,-421.23 7193.27,-421.23"/>
<polygon fill="black" stroke="black" points="7193.18,-424.73 7203.18,-421.23 7193.18,-417.73 7193.18,-424.73"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="7056.62" y="-440.93" font-family="Times,serif" font-size="14.00">center_ack_stop</text>
<text xml:space="preserve" text-anchor="middle" x="7056.62" y="-424.43" font-family="Times,serif" font-size="14.00">ID210 STOP_CLIMAX_CENTER_CONFIRM</text>
</g>
<!-- S_REQ_111_STOP_CLIMAX_TOP -->
<g id="node20" class="node">
<title>S_REQ_111_STOP_CLIMAX_TOP</title>
<g id="a_node20"><a xlink:title="{&quot;owner&quot;: &quot;MAC&quot;, &quot;role&quot;: &quot;request&quot;, &quot;description&quot;: &quot;MAC issues a manual stop for the top piece launch&quot;}">
<polygon fill="#5d8aa8" stroke="black" points="7902,-440.23 7672.25,-440.23 7672.25,-402.23 7902,-402.23 7902,-440.23"/>
<text xml:space="preserve" text-anchor="middle" x="7787.12" y="-422.93" font-family="Helvetica,sans-Serif" font-size="14.00">S_REQ_111_STOP_CLIMAX_TOP</text>
<text xml:space="preserve" text-anchor="middle" x="7787.12" y="-407.93" font-family="Helvetica,sans-Serif" font-size="14.00">REQUEST_STOP_CLIMAX_TOP</text>
</a>
</g>
</g>
<!-- S_CONF_210_STOP_CLIMAX_CENTER&#45;&gt;S_REQ_111_STOP_CLIMAX_TOP -->
<g id="edge18" class="edge">
<title>S_CONF_210_STOP_CLIMAX_CENTER&#45;&gt;S_REQ_111_STOP_CLIMAX_TOP</title>
<g id="a_edge18"><a xlink:title="{&quot;trigger&quot;: &quot;mac_followup_stop&quot;, &quot;message&quot;: &quot;ID111 STOP_CLIMAX_TOP&quot;, &quot;notes&quot;: &quot;MAC cascades stop to the top piece&quot;, &quot;payload&quot;: &quot;reason&quot;}">
<path fill="none" stroke="black" d="M7472.21,-421.23C7531.89,-421.23 7601.95,-421.23 7660.73,-421.23"/>
<polygon fill="black" stroke="black" points="7660.43,-424.73 7670.43,-421.23 7660.43,-417.73 7660.43,-424.73"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="7572.12" y="-440.93" font-family="Times,serif" font-size="14.00">mac_followup_stop</text>
<text xml:space="preserve" text-anchor="middle" x="7572.12" y="-424.43" font-family="Times,serif" font-size="14.00">ID111 STOP_CLIMAX_TOP</text>
</g>
<!-- S_CONF_211_STOP_CLIMAX_TOP -->
<g id="node21" class="node">
<title>S_CONF_211_STOP_CLIMAX_TOP</title>
<g id="a_node21"><a xlink:title="{&quot;owner&quot;: &quot;TOP&quot;, &quot;role&quot;: &quot;confirm&quot;, &quot;description&quot;: &quot;Top piece reports it halted the launch routine&quot;}">
<polygon fill="#f28c28" stroke="black" points="8410.75,-409.23 8171.25,-409.23 8171.25,-371.23 8410.75,-371.23 8410.75,-409.23"/>
<text xml:space="preserve" text-anchor="middle" x="8291" y="-391.93" font-family="Helvetica,sans-Serif" font-size="14.00">S_CONF_211_STOP_CLIMAX_TOP</text>
<text xml:space="preserve" text-anchor="middle" x="8291" y="-376.93" font-family="Helvetica,sans-Serif" font-size="14.00">CONFIRM_STOP_CLIMAX_TOP</text>
</a>
</g>
</g>
<!-- S_REQ_111_STOP_CLIMAX_TOP&#45;&gt;S_CONF_211_STOP_CLIMAX_TOP -->
<g id="edge19" class="edge">
<title>S_REQ_111_STOP_CLIMAX_TOP&#45;&gt;S_CONF_211_STOP_CLIMAX_TOP</title>
<g id="a_edge19"><a xlink:title="{&quot;trigger&quot;: &quot;top_ack_stop&quot;, &quot;message&quot;: &quot;ID211 STOP_CLIMAX_TOP_CONFIRM&quot;, &quot;notes&quot;: &quot;Top piece confirms stop&quot;, &quot;payload&quot;: &quot;request_id,status&quot;}">
<path fill="none" stroke="black" d="M7902.32,-414.18C7978.98,-409.44 8080.16,-403.19 8159.93,-398.26"/>
<polygon fill="black" stroke="black" points="8159.76,-401.78 8169.53,-397.67 8159.33,-394.79 8159.76,-401.78"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="8036.62" y="-432.62" font-family="Times,serif" font-size="14.00">top_ack_stop</text>
<text xml:space="preserve" text-anchor="middle" x="8036.62" y="-416.12" font-family="Times,serif" font-size="14.00">ID211 STOP_CLIMAX_TOP_CONFIRM</text>
</g>
<!-- S_CONF_211_STOP_CLIMAX_TOP&#45;&gt;S_IDLE_ROUTER -->
<g id="edge20" class="edge">
<title>S_CONF_211_STOP_CLIMAX_TOP&#45;&gt;S_IDLE_ROUTER</title>
<g id="a_edge20"><a xlink:title="{&quot;trigger&quot;: &quot;router_clear_context&quot;, &quot;message&quot;: &quot;&quot;, &quot;notes&quot;: &quot;Router releases climax state and returns to idle&quot;, &quot;payload&quot;: &quot;&quot;}">
<path fill="none" stroke="black" d="M8170.89,-384.29C8069.22,-379.74 7919.11,-374.23 7788.12,-374.23 377.75,-374.23 377.75,-374.23 377.75,-374.23 274.45,-374.23 246.35,-383.69 145.75,-360.23 135.18,-357.76 124.23,-354.04 113.93,-349.94"/>
<polygon fill="black" stroke="black" points="115.45,-346.78 104.87,-346.16 112.75,-353.24 115.45,-346.78"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="3834.5" y="-377.43" font-family="Times,serif" font-size="14.00">router_clear_context</text>
</g>
<!-- S_CONF_401_START_IDLE -->
<g id="node23" class="node">
<title>S_CONF_401_START_IDLE</title>
<g id="a_node23"><a xlink:title="{&quot;owner&quot;: &quot;ROUTER&quot;, &quot;role&quot;: &quot;confirm&quot;, &quot;description&quot;: &quot;Router aggregates field confirmations that idle mode engaged&quot;}">
<polygon fill="#f28c28" stroke="black" points="889.88,-313.23 699.12,-313.23 699.12,-275.23 889.88,-275.23 889.88,-313.23"/>
<text xml:space="preserve" text-anchor="middle" x="794.5" y="-295.93" font-family="Helvetica,sans-Serif" font-size="14.00">S_CONF_401_START_IDLE</text>
<text xml:space="preserve" text-anchor="middle" x="794.5" y="-280.93" font-family="Helvetica,sans-Serif" font-size="14.00">CONFIRM_START_IDLE</text>
</a>
</g>
</g>
<!-- S_REQ_301_START_IDLE&#45;&gt;S_CONF_401_START_IDLE -->
<g id="edge26" class="edge">
<title>S_REQ_301_START_IDLE&#45;&gt;S_CONF_401_START_IDLE</title>
<g id="a_edge26"><a xlink:title="{&quot;trigger&quot;: &quot;devices_ack_idle&quot;, &quot;message&quot;: &quot;ID401 START_IDLE_CONFIRM&quot;, &quot;notes&quot;: &quot;Router aggregates START_IDLE confirms&quot;, &quot;payload&quot;: &quot;device_id,status&quot;}">
<path fill="none" stroke="black" d="M474.15,-319.7C537.73,-314.63 621.68,-307.93 687.54,-302.68"/>
<polygon fill="black" stroke="black" points="687.59,-306.19 697.28,-301.9 687.03,-299.21 687.59,-306.19"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="586.25" y="-337.18" font-family="Times,serif" font-size="14.00">devices_ack_idle</text>
<text xml:space="preserve" text-anchor="middle" x="586.25" y="-320.68" font-family="Times,serif" font-size="14.00">ID401 START_IDLE_CONFIRM</text>
</g>
<!-- S_CONF_401_START_IDLE&#45;&gt;S_IDLE_ROUTER -->
<g id="edge27" class="edge">
<title>S_CONF_401_START_IDLE&#45;&gt;S_IDLE_ROUTER</title>
<g id="a_edge27"><a xlink:title="{&quot;trigger&quot;: &quot;router_idle_complete&quot;, &quot;message&quot;: &quot;&quot;, &quot;notes&quot;: &quot;Router returns to idle after broadcast completion&quot;, &quot;payload&quot;: &quot;&quot;}">
<path fill="none" stroke="black" d="M698.82,-285.3C596.28,-277.2 428.01,-268.53 283.75,-282.73 235.08,-287.52 181.2,-298.16 139.07,-307.72"/>
<polygon fill="black" stroke="black" points="138.51,-304.26 129.55,-309.91 140.08,-311.08 138.51,-304.26"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="378.75" y="-285.93" font-family="Times,serif" font-size="14.00">router_idle_complete</text>
</g>
<!-- S_CONF_402_STOP_IDLE -->
<g id="node25" class="node">
<title>S_CONF_402_STOP_IDLE</title>
<g id="a_node25"><a xlink:title="{&quot;owner&quot;: &quot;ROUTER&quot;, &quot;role&quot;: &quot;confirm&quot;, &quot;description&quot;: &quot;Router aggregates confirmations that idle mode ended&quot;}">
<polygon fill="#f28c28" stroke="black" points="886.12,-209.23 702.88,-209.23 702.88,-171.23 886.12,-171.23 886.12,-209.23"/>
<text xml:space="preserve" text-anchor="middle" x="794.5" y="-191.93" font-family="Helvetica,sans-Serif" font-size="14.00">S_CONF_402_STOP_IDLE</text>
<text xml:space="preserve" text-anchor="middle" x="794.5" y="-176.93" font-family="Helvetica,sans-Serif" font-size="14.00">CONFIRM_STOP_IDLE</text>
</a>
</g>
</g>
<!-- S_REQ_302_STOP_IDLE&#45;&gt;S_CONF_402_STOP_IDLE -->
<g id="edge29" class="edge">
<title>S_REQ_302_STOP_IDLE&#45;&gt;S_CONF_402_STOP_IDLE</title>
<g id="a_edge29"><a xlink:title="{&quot;trigger&quot;: &quot;devices_ack_stop_idle&quot;, &quot;message&quot;: &quot;ID402 STOP_IDLE_CONFIRM&quot;, &quot;notes&quot;: &quot;Router aggregates STOP_IDLE confirms&quot;, &quot;payload&quot;: &quot;device_id,status&quot;}">
<path fill="none" stroke="black" d="M470.29,-212.1C535.51,-207.69 623.59,-201.73 691.33,-197.14"/>
<polygon fill="black" stroke="black" points="691.19,-200.66 700.93,-196.49 690.72,-193.68 691.19,-200.66"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="586.25" y="-229.66" font-family="Times,serif" font-size="14.00">devices_ack_stop_idle</text>
<text xml:space="preserve" text-anchor="middle" x="586.25" y="-213.16" font-family="Times,serif" font-size="14.00">ID402 STOP_IDLE_CONFIRM</text>
</g>
<!-- S_CONF_402_STOP_IDLE&#45;&gt;S_IDLE_ROUTER -->
<g id="edge30" class="edge">
<title>S_CONF_402_STOP_IDLE&#45;&gt;S_IDLE_ROUTER</title>
<g id="a_edge30"><a xlink:title="{&quot;trigger&quot;: &quot;router_resume_active&quot;, &quot;message&quot;: &quot;&quot;, &quot;notes&quot;: &quot;Router returns to idle after idle&#45;stop broadcast&quot;, &quot;payload&quot;: &quot;&quot;}">
<path fill="none" stroke="black" d="M702.66,-179.64C546.17,-163.32 234.05,-139.69 145.75,-199.23 110.77,-222.81 87.75,-267.13 75.52,-296.67"/>
<polygon fill="black" stroke="black" points="72.34,-295.2 71.91,-305.79 78.84,-297.78 72.34,-295.2"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="378.75" y="-168.07" font-family="Times,serif" font-size="14.00">router_resume_active</text>
</g>
<!-- S_CONF_403_PING -->
<g id="node27" class="node">
<title>S_CONF_403_PING</title>
<g id="a_node27"><a xlink:title="{&quot;owner&quot;: &quot;ROUTER&quot;, &quot;role&quot;: &quot;confirm&quot;, &quot;description&quot;: &quot;Router collects alive responses from all devices&quot;}">
<polygon fill="#f28c28" stroke="black" points="865.88,-96.23 723.12,-96.23 723.12,-58.23 865.88,-58.23 865.88,-96.23"/>
<text xml:space="preserve" text-anchor="middle" x="794.5" y="-78.93" font-family="Helvetica,sans-Serif" font-size="14.00">S_CONF_403_PING</text>
<text xml:space="preserve" text-anchor="middle" x="794.5" y="-63.93" font-family="Helvetica,sans-Serif" font-size="14.00">CONFIRM_PING</text>
</a>
</g>
</g>
<!-- S_REQ_303_PING&#45;&gt;S_CONF_403_PING -->
<g id="edge32" class="edge">
<title>S_REQ_303_PING&#45;&gt;S_CONF_403_PING</title>
<g id="a_edge32"><a xlink:title="{&quot;trigger&quot;: &quot;devices_echo_ping&quot;, &quot;message&quot;: &quot;ID403 PING_CONFIRM&quot;, &quot;notes&quot;: &quot;Router collects ping replies&quot;, &quot;payload&quot;: &quot;device_id,status&quot;}">
<path fill="none" stroke="black" d="M449.94,-103.8C522.31,-98.2 635.07,-89.48 711.5,-83.57"/>
<polygon fill="black" stroke="black" points="711.76,-87.06 721.46,-82.8 711.22,-80.08 711.76,-87.06"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="586.25" y="-119.47" font-family="Times,serif" font-size="14.00">devices_echo_ping</text>
<text xml:space="preserve" text-anchor="middle" x="586.25" y="-102.97" font-family="Times,serif" font-size="14.00">ID403 PING_CONFIRM</text>
</g>
<!-- S_CONF_403_PING&#45;&gt;S_IDLE_ROUTER -->
<g id="edge33" class="edge">
<title>S_CONF_403_PING&#45;&gt;S_IDLE_ROUTER</title>
<g id="a_edge33"><a xlink:title="{&quot;trigger&quot;: &quot;heartbeat_complete&quot;, &quot;message&quot;: &quot;&quot;, &quot;notes&quot;: &quot;Router returns to idle after heartbeat&quot;, &quot;payload&quot;: &quot;&quot;}">
<path fill="none" stroke="black" d="M739.8,-57.73C618.22,-17.38 319.04,60.05 145.75,-84.23 81.64,-137.61 68.09,-243.42 65.4,-295.63"/>
<polygon fill="black" stroke="black" points="61.92,-295.16 65.01,-305.29 68.91,-295.44 61.92,-295.16"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="378.75" y="-18.09" font-family="Times,serif" font-size="14.00">heartbeat_complete</text>
</g>
<!-- S_CONF_404_RESET -->
<g id="node29" class="node">
<title>S_CONF_404_RESET</title>
<g id="a_node29"><a xlink:title="{&quot;owner&quot;: &quot;ROUTER&quot;, &quot;role&quot;: &quot;confirm&quot;, &quot;description&quot;: &quot;Router aggregates reset confirmations before resuming routing&quot;}">
<polygon fill="#f28c28" stroke="black" points="3911.5,-505.23 3757.5,-505.23 3757.5,-467.23 3911.5,-467.23 3911.5,-505.23"/>
<text xml:space="preserve" text-anchor="middle" x="3834.5" y="-487.93" font-family="Helvetica,sans-Serif" font-size="14.00">S_CONF_404_RESET</text>
<text xml:space="preserve" text-anchor="middle" x="3834.5" y="-472.93" font-family="Helvetica,sans-Serif" font-size="14.00">CONFIRM_RESET</text>
</a>
</g>
</g>
<!-- S_REQ_304_RESET&#45;&gt;S_CONF_404_RESET -->
<g id="edge35" class="edge">
<title>S_REQ_304_RESET&#45;&gt;S_CONF_404_RESET</title>
<g id="a_edge35"><a xlink:title="{&quot;trigger&quot;: &quot;devices_ack_reset&quot;, &quot;message&quot;: &quot;ID404 RESET_CONFIRM&quot;, &quot;notes&quot;: &quot;Router aggregates reset confirmations&quot;, &quot;payload&quot;: &quot;device_id,status&quot;}">
<path fill="none" stroke="black" d="M3305.17,-611.26C3417.55,-584.67 3627.65,-534.94 3746.23,-506.88"/>
<polygon fill="black" stroke="black" points="3747.02,-510.29 3755.95,-504.58 3745.41,-503.48 3747.02,-510.29"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="3529.12" y="-610.58" font-family="Times,serif" font-size="14.00">devices_ack_reset</text>
<text xml:space="preserve" text-anchor="middle" x="3529.12" y="-594.08" font-family="Times,serif" font-size="14.00">ID404 RESET_CONFIRM</text>
</g>
<!-- S_CONF_404_RESET&#45;&gt;S_IDLE_ROUTER -->
<g id="edge36" class="edge">
<title>S_CONF_404_RESET&#45;&gt;S_IDLE_ROUTER</title>
<g id="a_edge36"><a xlink:title="{&quot;trigger&quot;: &quot;router_reset_complete&quot;, &quot;message&quot;: &quot;&quot;, &quot;notes&quot;: &quot;Router resumes idle after reset loop&quot;, &quot;payload&quot;: &quot;&quot;}">
<path fill="none" stroke="black" d="M3757.17,-481.9C3471.06,-466.08 2434.89,-412.23 1580.12,-412.23 377.75,-412.23 377.75,-412.23 377.75,-412.23 274.09,-412.23 242.07,-426.54 145.75,-388.23 125.69,-380.25 106.37,-365.79 91.65,-352.84"/>
<polygon fill="black" stroke="black" points="94.41,-350.62 84.66,-346.47 89.7,-355.79 94.41,-350.62"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="1797.5" y="-417.5" font-family="Times,serif" font-size="14.00">router_reset_complete</text>
</g>
<!-- S_ERR_500_COMM_ERROR&#45;&gt;S_REQ_304_RESET -->
<g id="edge39" class="edge">
<title>S_ERR_500_COMM_ERROR&#45;&gt;S_REQ_304_RESET</title>
<g id="a_edge39"><a xlink:title="{&quot;trigger&quot;: &quot;mac_recovery_reset&quot;, &quot;message&quot;: &quot;&quot;, &quot;notes&quot;: &quot;MAC responds to COMM_ERROR by issuing broadcast RESET&quot;, &quot;payload&quot;: &quot;&quot;}">
<path fill="none" stroke="black" d="M2835.91,-629.23C2925.15,-629.23 3054.72,-629.23 3139.96,-629.23"/>
<polygon fill="black" stroke="black" points="3139.91,-632.73 3149.91,-629.23 3139.91,-625.73 3139.91,-632.73"/>
</a>
</g>
<text xml:space="preserve" text-anchor="middle" x="2961.88" y="-632.43" font-family="Times,serif" font-size="14.00">mac_recovery_reset</text>
</g>
</g>
</svg>
